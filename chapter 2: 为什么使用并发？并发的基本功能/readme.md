## chapter 2：为什么使用并发？并发的基本功能

### 1. 为什么使用并发？

在项目中使用并发的核心诉求主要就是两点——**关注点分离**和**性能提升**。

#### a. 关注点分离 (Soc)
在一个大型项目中，始终需要将相关的代码和无关的代码分离。换言之，处理不同类别的工作的代码应当分开，而不应该混合在一起，这就是**关注点分离**的基本概念。

而并发或者称多线程，为项目代码的关注点分离提供了一个有效的解决方案。

举个关注点分离简单的例子，例如使用Word软件编辑一个Word文档，这时可能存在一些不同类别的工作：
+ 处理用户鼠标点击的操作
+ 文档的拼写检查
+ 文档的保存等文件操作处理
+ ......

多线程/并发就可以解决关注点分离的问题，例如对于上述的工作，可以创建一个负责拼写检查的线程，一个监听用户鼠标点击操作的线程，一个负责保存文件以及处理其他文件操作的线程，通过这些线程的并发执行，就能够在保证关注点分离的原则上，实现复杂的应用功能。

#### b. 性能提升


### 2. 并发的基本功能和实现方式

并发存在两种最基本的实现方式：**数据并行**和**任务并行**

+ 数据并行：需要完成一个给定任务，将该任务的输入数据分为多份，每个线程处理其中一份或者几份数据，每个线程都对数据执行相同的处理步骤，这种并行叫做数据并行。数据并行的实现方式较为简单。

+ 任务并行：需要完成一个给定任务，将该任务的处理步骤分为多份，每个线程完成其中一部分不同的处理步骤，但是数据始终只有完整的一份。这种并行叫做数据并行。为了保证步骤的有序进行，某些步骤必须在其他部分执行前完成，这就需要使用同步和互斥操作。

文字描述可能不甚清晰，下面以制造100辆汽车为例，这里以图表方式展示了数据并行和任务并行的基本概念。还可以将数据并行和任务并行结合起来，方法非常简单，因此这里略去了组合方式的图表。

+ 数据并行  

![avatar](https://github.com/Happyxianyueveryday/cpp-concurrency/blob/master/chapter%202:%20%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E5%B9%B6%E5%8F%91%EF%BC%9F%E5%B9%B6%E5%8F%91%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/pics/QQ%E6%88%AA%E5%9B%BE20190831083733.png)

+ 任务并行  

![avatar](https://github.com/Happyxianyueveryday/cpp-concurrency/blob/master/chapter%202:%20%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E5%B9%B6%E5%8F%91%EF%BC%9F%E5%B9%B6%E5%8F%91%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/pics/QQ%E6%88%AA%E5%9B%BE20190831083740.png)


